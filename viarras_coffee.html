<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Viarras Coffee</title>
<link rel="icon" type="logo.jpeg" href="assets\logo.jpeg">
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<style>
  :root {
    --coffee-brown: #8B5E34;
    --light-cream: #F9F6F1;
    --text-dark: #4A3728;
  }

  body {
    background-color: var(--light-cream);
    color: var(--text-dark);
    font-family: 'Poppins', sans-serif;
    scroll-behavior: smooth;
  }

  header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 15px 50px; background-color: var(--light-cream);
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    position: sticky; top: 0; z-index: 10;
  }

  nav a { margin: 0 15px; color: var(--coffee-brown); text-decoration: none; font-weight: 600; }
  nav a:hover { color: var(--text-dark); }

  .hero {
    display: flex; align-items: center; justify-content: center; flex-direction: column;
    height: 80vh; text-align: center;
    background: url('assets/coffee-bg.jpg') center/cover no-repeat;
    position: relative;
  }
  .hero::before { content:''; position:absolute; inset:0; background:rgba(249,246,241,0.85); }
  .hero-content { position:relative; z-index:1; }

  .btn { background: var(--coffee-brown); color:white; border:none; padding:12px 25px; border-radius:6px; cursor:pointer; }
  .btn:hover { background:#704626; }

  section { padding: 60px 80px; text-align:center; }

  .logo {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo img {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  object-fit: cover;
}
.logo span {
  font-size: 1.5em;
  font-weight: bold;
  color: #ffdd9a;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
}

  .menu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
  }

  .menu-item {
    background: white;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    transform: translateY(40px);
    opacity: 0;
    transition: all 0.8s ease;
  }
  .menu-item.visible {
    transform: translateY(0);
    opacity: 1;
  }

  /* Hover interaktif */
  .menu-item:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 6px 12px rgba(0,0,0,0.2);
  }

  .menu-item img { 
  width: 100%;
  height: 180px;           
  object-fit: cover;       
  border-radius: 10px;
  background: #f9f4ef;
  transition: transform 0.4s ease;
}

  .menu-item:hover img {
    transform: scale(1.08);
  }

  .menu-item h4 { color: var(--coffee-brown); margin-top:10px; }
  .menu-item p { font-size: 0.9em; }

  .quantity-control {
    display:flex; justify-content:center; align-items:center; gap:8px; margin-top:6px;
  }
  .quantity-control button {
    width:28px; height:28px; border:none; border-radius:50%;
    background:var(--coffee-brown); color:white; cursor:pointer;
  }

  footer { background:var(--coffee-brown); color:white; text-align:center; padding:20px 0; margin-top:50px; }

  /* keranjang popup */
  #cartModal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  .cart-content {
    background: white;
    padding: 25px;
    border-radius: 12px;
    width: 90%;
    max-width: 450px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    position: relative;
  }
  .cart-content h3 {
    margin-bottom: 10px;
    color: #8B5E34;
    text-align: center;
  }
  #closeCart {
    background: #8B5E34;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 6px;
    cursor: pointer;
    display: block;
    margin: 10px auto 0;
  }
  #closeCart:hover { background: #704626; }

  /* order form */
  .order-form {
    background:#5a3f2b; color:white; padding:30px; border-radius:10px;
    max-width:600px; margin:0 auto; text-align:left;
  }
  .order-form input, .order-form textarea, .order-form select {
    width:100%; padding:10px; border:none; border-radius:6px; margin:8px 0;
  }
  .order-form button {
    width:100%; background:var(--coffee-brown); color:white;
    padding:10px; border:none; border-radius:6px; cursor:pointer;
  }
  .order-form button:hover { background:#704626; }

  #jenisPesanan {
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 10px;
  font-size: 15px;
  margin-bottom: 10px;
  width: 100%;
  box-sizing: border-box;
}


  /* uang diberikan & kembali */
  #cashSection input, #kembalian {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 15px;
    padding: 10px;
    width: 100%;
    box-sizing: border-box;
  }
  #kembalian {
    margin-top: 6px;
    text-align: center;
    font-weight: bold;
  }

  #qrisSection {
  text-align: center;           
  margin-top: 15px;
  background: #fff8f1;          
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

#qrisCode {
  display: flex;
  justify-content: center;      
  align-items: center;          
  margin-top: 10px;
}

#qrisSection img, #qrisCode canvas {
  transition: transform 0.3s ease;
}

#qrisSection img:hover, #qrisCode canvas:hover {
  transform: scale(1.05);
}


  #struk {
    background:white; color:#333; border-radius:10px;
    padding:15px; margin-top:20px; display:none;
  }
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="assets/logo.jpeg" alt="Logo Viarras Coffee">
    <strong>Viarras Coffee</strong>
  </div>
  <nav>
    <a href="#menu">Menu</a>
    <a href="#order">Pesan</a>
    <a href="#reservasi">Reservasi</a> 
    <a href="#" id="keranjangBtn">üõí <span id="cartCount">0</span></a>
  </nav>

</header>

<section class="hero">
  <div class="hero-content">
    <h1>Selamat Datang di Viarras Coffee</h1>
    <p>Tempat terbaik menikmati kopi & suasana nyaman.</p>
    <button class="btn" id="lihatMenu">Lihat Menu</button>
  </div>
</section>

  <!-- MENU -->
<section id="menu">
  <h2>Menu Andalan Kami</h2>

  <!-- Signature Coffee -->
  <h3 class="menu-category">‚òï Signature Coffee</h3>
  <div class="menu">
    <div class="menu-item">
      <img src="assets/Viarra Cream Br√ªl√©e Latte.jpg" alt="Viarra Cream Brulee Latte">
      <h4>Viarra Cream Br√ªl√©e Latte</h4>
      <p>Espresso premium dengan susu creamy dan lapisan karamel br√ªl√©e renyah.</p>
      <span class="price">Rp 35.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Caramel_Cloud.jpg" alt="Caramel Cloud Macchiato">
      <h4>Caramel Cloud Macchiato</h4>
      <p>Espresso lembut dengan foam susu ringan dan saus karamel.</p>
      <span class="price">Rp 34.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Viarra Aren Coffee.jpg" alt="Viarra Aren Coffee">
      <h4>Viarra Aren Coffee</h4>
      <p>Espresso dengan manis alami dari gula aren cair khas Nusantara.</p>
      <span class="price">Rp 30.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
  </div>

  <!-- Classic Coffee -->
  <h3 class="menu-category">‚òï Classic Coffee</h3>
  <div class="menu">
    <div class="menu-item">
      <img src="assets/espresso.jpg" alt="Espresso">
      <h4>Espresso</h4>
      <p>Kopi murni dengan rasa kuat dan aroma khas.</p>
      <span class="price">Rp 20.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/americano.jpg" alt="Americano">
      <h4>Americano</h4>
      <p>Espresso dengan air panas atau dingin, ringan namun bold.</p>
      <span class="price">Rp 25.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/cafe latte.jpg" alt="Caf√© Latte">
      <h4>Caf√© Latte</h4>
      <p>Espresso berpadu dengan susu creamy yang lembut.</p>
      <span class="price">Rp 28.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/mocha latte.jpg" alt="Mocha Latte">
      <h4>Mocha Latte</h4>
      <p>Kombinasi espresso, cokelat premium, dan susu panas.</p>
      <span class="price">Rp 30.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
  </div>

  <!-- Non-Coffee -->
  <h3 class="menu-category">üç´ Non-Coffee Series</h3>
  <div class="menu">
    <div class="menu-item">
      <img src="assets/Signature Chocolate.jpg" alt="Signature Chocolate">
      <h4>Signature Chocolate</h4>
      <p>Cokelat murni dengan susu segar dan rasa lembut.</p>
      <span class="price">Rp 28.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Matcha Latte.jpg" alt="Matcha Latte">
      <h4>Matcha Latte</h4>
      <p>Teh hijau Jepang premium dengan susu segar.</p>
      <span class="price">Rp 30.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Red Velvet Latte.jpg" alt="Red Velvet Latte">
      <h4>Red Velvet Latte</h4>
      <p>Campuran red velvet dan susu lembut dengan aroma vanila.</p>
      <span class="price">Rp 28.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
  </div>

  <!-- Tea -->
  <h3 class="menu-category">üçµ Tea Series</h3>
  <div class="menu">
    <div class="menu-item">
      <img src="assets/Earl Grey Tea ice.jpeg" alt="Earl Grey Tea">
      <h4>Earl Grey Tea</h4>
      <p>Teh hitam dengan aroma bergamot segar.</p>
      <span class="price">Rp 24.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Lychee Tea.jpg" alt="Lychee Tea">
      <h4>Lychee Tea</h4>
      <p>Teh segar dengan sirup buah leci alami.</p>
      <span class="price">Rp 25.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
  </div>

  <!-- Snacks -->
  <h3 class="menu-category">üçü Savory Snacks</h3>
  <div class="menu">
    <div class="menu-item">
      <img src="assets/French Fries.jpg" alt="French Fries">
      <h4>French Fries</h4>
      <p>Kentang goreng renyah dengan taburan garam laut.</p>
      <span class="price">Rp 22.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Chicken Wings.jpg" alt="Chicken Wings">
      <h4>Chicken Wings (Honey / BBQ)</h4>
      <p>Sayap ayam gurih dengan saus pilihan.</p>
      <span class="price">Rp 35.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Loaded Nachos.jpg" alt="Loaded Nachos">
      <h4>Loaded Nachos</h4>
      <p>Keripik jagung renyah dengan saus keju dan salsa.</p>
      <span class="price">Rp 35.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
  </div>

  <!-- Pastries -->
  <h3 class="menu-category">ü•ê Sweet Pastries</h3>
  <div class="menu">
    <div class="menu-item">
      <img src="assets/Butter Croissant.jpg" alt="Butter Croissant">
      <h4>Butter Croissant</h4>
      <p>Pastry lembut dan harum mentega, teman kopi terbaik.</p>
      <span class="price">Rp 20.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
    <div class="menu-item">
      <img src="assets/Chocolate Lava Cake.jpg" alt="Chocolate Lava Cake">
      <h4>Chocolate Lava Cake</h4>
      <p>Kue cokelat dengan isian cokelat panas di tengahnya.</p>
      <span class="price">Rp 25.000</span>
      <div class="quantity-control">
        <button class="minus">‚àí</button>
        <span class="qty">0</span>
        <button class="plus">+</button>
      </div>
    </div>
  </div>
</section>

<!-- ORDER -->
<section id="order">
  <h2>Pesan Sekarang</h2>
  <div class="order-form">
    <h3>Form Pemesanan</h3>
    <form id="formPesan">
      <label>Nama:</label>
      <input type="text" id="nama" required>
      <label>No. HP:</label>
      <input type="text" id="nohp" required>
      <label>Catatan:</label>
      <textarea id="catatan"></textarea>

      <label>Jenis Pesanan:</label>
      <select id="jenisPesanan" required>
        <option value="">-- Pilih Jenis Pesanan --</option>
        <option value="dinein">Dine In</option>
        <option value="takeaway">Take Away</option>
        <option value="drivethru">Drive Thru</option>
      </select>


      <label>Metode Pembayaran:</label>
      <select id="pembayaran" required>
        <option value="">-- Pilih --</option>
        <option value="cash">Cash</option>
        <option value="debit">Debit</option>
        <option value="qris">QRIS</option>
      </select>

      <!-- Ringkasan -->
      <div id="ringkasanPembayaran"
           style="margin-top:15px; background:#f7efe7; color:#333;
           padding:10px; border-radius:8px; display:none;">
        <p><b>Subtotal:</b> <span id="subtotalText">Rp 0</span></p>
        <p><b>PPN (10%):</b> <span id="ppnText">Rp 0</span></p>
        <p><b>Total Bayar:</b> <span id="totalText">Rp 0</span></p>
      </div>

      <!-- CASH -->
      <div id="cashSection" style="display:none;">
        <label>Uang Diberikan:</label>
        <input type="number" id="uangDiberikan" placeholder="Masukkan nominal uang">
        <div id="kembalian">Rp 0</div>
      </div>

      <!-- DEBIT -->
      <div id="debitSection" style="display:none;">
        <label>Pilih Bank:</label>
        <select id="bank">
          <option>BCA</option>
          <option>Mandiri</option>
          <option>BRI</option>
          <option>BNI</option>
        </select>
      </div>

      <!-- QRIS -->
      <div id="qrisSection" style="display:none; text-align:center; margin-top:15px;">
        <p>Scan QRIS untuk membayar:</p>
        <div id="qrisCode"></div>
      </div>

      <button type="submit">Kirim & Bayar</button>
    </form>

    <!-- STRUK -->
    <div id="struk"></div>
  </div>
</section>

<footer>
  <p>¬© 2025 Viarras Coffee ‚Äî dibuat dengan ‚òï</p>
</footer>

<section id="reservasi">
  <h2>Reservasi Meja</h2>
  <div class="order-form">
    <h3>Form Reservasi Meja</h3>
    <form id="formReservasi">
      <label>Nama:</label>
      <input type="text" id="resNama" required>

      <label>No. HP:</label>
      <input type="text" id="resNoHp" required>

      <label>Tanggal & Waktu:</label>
      <input type="datetime-local" id="resWaktu" required>

      <label>Jumlah Orang:</label>
      <input type="number" id="resOrang" min="1" required>

      <button type="submit">Reservasi</button>
    </form>

    <div id="resStruk" style="margin-top:20px; display:none; background:#fff; color:#333; padding:15px; border-radius:10px;"></div>
</section>


<!-- POPUP KERANJANG -->
<div id="cartModal">
  <div class="cart-content">
    <h3>üõç Keranjang</h3>
    <div id="cartItems"></div>
    <div id="cartTotal"></div>
    <button id="closeCart">Tutup</button>
  </div>
</div>

<script>
  // Animasi muncul saat scroll
const menuItems = document.querySelectorAll('.menu-item');
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) entry.target.classList.add('visible');
  });
}, { threshold: 0.2 });

menuItems.forEach(item => observer.observe(item));
const cart = {};
const cartCount = document.getElementById("cartCount");
const cartItemsContainer = document.getElementById("cartItems");
const lihatMenu = document.getElementById("lihatMenu");
lihatMenu.onclick = () => document.querySelector("#menu").scrollIntoView({behavior:"smooth"});

// scroll ke menu
document.getElementById("lihatMenu").onclick = () => 
  document.querySelector("#menu").scrollIntoView({behavior:"smooth"});

// tambah & kurang item
document.querySelectorAll(".menu-item").forEach(item => {
  const name = item.querySelector("h4").textContent;
  const price = item.querySelector(".price").textContent;
  const plus = item.querySelector(".plus");
  const minus = item.querySelector(".minus");
  const qtyDisplay = item.querySelector(".qty");

  plus.onclick = () => {
    const qty = (cart[name]?.qty || 0) + 1;
    cart[name] = {qty, price};
    qtyDisplay.textContent = qty;
    updateCart();
  };
  minus.onclick = () => {
    if (!cart[name]) return;
    cart[name].qty--;
    if (cart[name].qty <= 0) delete cart[name];
    qtyDisplay.textContent = cart[name]?.qty || 0;
    updateCart();
  };
});

function updateCart(){
  const totalItems = Object.values(cart).reduce((a,c)=>a+c.qty,0);
  cartCount.textContent = totalItems;
  cartItemsContainer.innerHTML =
    Object.entries(cart).map(([n,d])=>`<div>${n} √ó ${d.qty} ‚Äî ${d.price}</div>`).join("") || "<p>Keranjang kosong</p>";

  const subtotal = Object.values(cart).reduce((a,c)=>{
    const harga = parseInt(c.price.replace(/\D/g,""));
    return a + harga * c.qty;
  },0);
  cartTotal.innerHTML = `<p>Subtotal: Rp ${subtotal.toLocaleString("id-ID")}</p>`;
  updateRingkasan();
}

function updateRingkasan() {
  const subtotal = Object.values(cart).reduce((a,c)=>{
    const harga = parseInt(c.price.replace(/\D/g,""));
    return a + harga * c.qty;
  },0);
  const ppn = subtotal * 0.10;
  const total = subtotal + ppn;

  const ringkasan = document.getElementById("ringkasanPembayaran");
  if (subtotal > 0) ringkasan.style.display = "block";
  else ringkasan.style.display = "none";

  document.getElementById("subtotalText").textContent = "Rp " + subtotal.toLocaleString("id-ID");
  document.getElementById("ppnText").textContent = "Rp " + ppn.toLocaleString("id-ID");
  document.getElementById("totalText").textContent = "Rp " + total.toLocaleString("id-ID");
}

 const mejaTersedia = {
  2: [1, 2, 3, 4, 5],      // meja untuk 1‚Äì2 orang
  4: [6, 7, 8, 9, 10],     // meja untuk 3‚Äì4 orang
  6: [11, 12, 13, 14, 15], // meja untuk 5‚Äì6 orang
  10: [16, 17, 18]         // meja untuk 7‚Äì10 orang
};

function dapatkanMeja(jumlahOrang) {
  if (jumlahOrang <= 2) {
    return mejaTersedia[2].shift() || "Penuh";
  } else if (jumlahOrang <= 4) {
    return mejaTersedia[4].shift() || "Penuh";
  } else if (jumlahOrang <= 6) {
    return mejaTersedia[6].shift() || "Penuh";
  } else if (jumlahOrang <= 10) {
    return mejaTersedia[10].shift() || "Penuh";
  } else {
    return "Hubungi Staff (Reservasi >10 orang)";
  }
}

  document.getElementById("formReservasi").addEventListener("submit", e => {
    e.preventDefault();

    const nama = document.getElementById("resNama").value;
    const nohp = document.getElementById("resNoHp").value;
    const waktu = document.getElementById("resWaktu").value;
    const orang = parseInt(document.getElementById("resOrang").value);

    const nomorMeja = dapatkanMeja(orang);

    const resStruk = document.getElementById("resStruk");
    resStruk.innerHTML = `
      <h3>‚úÖ Reservasi Berhasil</h3>
      <p><b>Nama:</b> ${nama}</p>
      <p><b>No. HP:</b> ${nohp}</p>
      <p><b>Tanggal & Waktu:</b> ${new Date(waktu).toLocaleString("id-ID")}</p>
      <p><b>Jumlah Orang:</b> ${orang}</p>
      <p><b>Nomor Meja:</b> ${nomorMeja}</p>
      <hr>
      <p>Terima kasih telah melakukan reservasi di <b>Viarras Coffee</b> ‚òï</p>
    `;
    resStruk.style.display = "block";
    alert(`Reservasi berhasil! Nomor Meja: ${nomorMeja}`);
    e.target.reset();
  });


// popup keranjang
document.getElementById("keranjangBtn").onclick = ()=>document.getElementById("cartModal").style.display="flex";
document.getElementById("closeCart").onclick = ()=>document.getElementById("cartModal").style.display="none";

// tampilkan metode pembayaran
document.getElementById("pembayaran").addEventListener("change", e => {
  const val = e.target.value;
  document.getElementById("cashSection").style.display = val === "cash" ? "block" : "none";
  document.getElementById("debitSection").style.display = val === "debit" ? "block" : "none";
  document.getElementById("qrisSection").style.display = val === "qris" ? "block" : "none";
});


// Fungsi membuat QRIS dinamis
function buatQRIS(total){
  const qrisDiv = document.getElementById("qrisCode");
  qrisDiv.innerHTML = "";
  if(total <= 0) return;
  // Ganti dengan link QRIS kamu sendiri:
  const qrisLink = `https://qris.id/viarrascoffee?amount=${total}`;
  new QRCode(qrisDiv, { text: qrisLink, width: 180, height: 180 });
}

// Update total dan tampilkan QRIS otomatis jika metode QRIS dipilih
document.getElementById("pembayaran")?.addEventListener("change", e=>{
  const val = e.target.value;
  const qrisSection = document.getElementById("qrisSection");
    if (val === "qris") {
    const totalText = document.getElementById("totalText").textContent.replace(/[^\d]/g, "");
    const totalBayar = parseInt(totalText) || 0;
    const qrisDiv = document.getElementById("qrisCode");
    qrisDiv.innerHTML = ""; // hapus QR lama

    if (totalBayar > 0) {
      new QRCode(qrisDiv, {
        text: `https://qris.id/viarrascoffee?amount=${totalBayar}`, // ganti link QRIS asli kamu di sini
        width: 150,
        height: 150
      });
    } else {
      qrisDiv.innerHTML = "<p>Isi pesanan dulu untuk menampilkan QRIS</p>";
    }
  }
});

// tampilkan uang kembali
document.getElementById("uangDiberikan").addEventListener("input", ()=>{
  const subtotal = Object.values(cart).reduce((a,c)=>{
    const harga=parseInt(c.price.replace(/\D/g,""));
    return a+harga*c.qty;
  },0);
  const total = subtotal + (subtotal*0.1);
  const uang = parseInt(document.getElementById("uangDiberikan").value)||0;
  const kembali = uang - total;

  const kembalianEl = document.getElementById("kembalian");
  if(uang>0){
    if(kembali >= 0){
      kembalianEl.textContent = `Rp ${kembali.toLocaleString("id-ID")}`;
      kembalianEl.style.color = "green";
    } else {
      kembalianEl.textContent = `Uang Kurang Rp ${Math.abs(kembali).toLocaleString("id-ID")}`;
      kembalianEl.style.color = "red";
    }
  } else {
    kembalianEl.textContent = "Rp 0";
    kembalianEl.style.color = "#333";
  }
});

// kirim pesanan
document.getElementById("formPesan").addEventListener("submit", e=>{
  e.preventDefault();
  if(Object.keys(cart).length===0){alert("Keranjang kosong!"); return;}

  const subtotal = Object.values(cart).reduce((a,c)=>{
    const harga=parseInt(c.price.replace(/\D/g,""));
    return a+harga*c.qty;
  },0);
  const ppn=subtotal*0.1, total=subtotal+ppn;

  const metode = document.getElementById("pembayaran").value;
  let metodeText="";
  if(metode==="cash"){
    const uang=parseInt(document.getElementById("uangDiberikan").value)||0;
    const kembali=uang-total;
    metodeText=`<p><b>üíµ Cash:</b> Dibayar Rp ${uang.toLocaleString("id-ID")}<br><b>Uang Kembali:</b> Rp ${kembali.toLocaleString("id-ID")}</p>`;
  } else if(metode==="debit"){
    const bank=document.getElementById("bank").value;
    metodeText=`<p><b>üè¶ Debit:</b> Bank ${bank}</p>`;
  } else if(metode==="qris"){
    metodeText=`<p><b>üì± QRIS</b> ‚Äî Pembayaran berhasil</p>`;
  }

      const jenisPesanan = document.getElementById("jenisPesanan").value;
    let jenisText = "";
    if (jenisPesanan === "dinein") jenisText = "üçΩÔ∏è Dine In";
    else if (jenisPesanan === "takeaway") jenisText = "ü•° Take Away";
    else if (jenisPesanan === "drivethru") jenisText = "üöó Drive Thru";


  const daftarPesanan = Object.entries(cart)
    .map(([n,d])=>`<li>${n} √ó ${d.qty} ‚Äî ${d.price}</li>`).join("");

  const waktu=new Date().toLocaleString("id-ID");
  const struk=document.getElementById("struk");
  struk.innerHTML=`
  <h3>‚úÖ Struk Pembayaran</h3>
  <p><b>Tanggal:</b> ${waktu}</p>
  <p><b>Jenis Pesanan:</b> ${jenisText}</p>
  <ul>${daftarPesanan}</ul>
  <p>Subtotal: Rp ${subtotal.toLocaleString("id-ID")}</p>
  <p>PPN (10%): Rp ${ppn.toLocaleString("id-ID")}</p>
  <h4>Total: Rp ${total.toLocaleString("id-ID")}</h4>
  ${metodeText}
  <hr>
  <p>Terima kasih telah berbelanja di <b>Viarras Coffee</b> ‚òï</p>
`;

  struk.style.display="block";
  alert("Pembayaran berhasil! Struk muncul di bawah.");
  Object.keys(cart).forEach(k=>delete cart[k]);
  cartCount.textContent=0;
  document.querySelectorAll(".qty").forEach(q=>q.textContent=0);
  updateRingkasan();
});
</script>